(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},88:function(e,t,c){"use strict";c.r(t);var a=c(6),s=c.n(a),n=c(41),i=c.n(n),o=(c(68),c(15)),r=(c(69),c(70),c(56)),j=c.n(r),l=c(55),d=c.n(l),u=c(47),h=c.n(u),b=c(48),m=c.n(b),O=(c(71),c(49)),p=(c(73),c(89),O.a.initializeApp({apiKey:"AIzaSyAHG4ZMV1mgLrGFJztocTYUJwDnGMPrCIE",authDomain:"whatsapp-8a1ce.firebaseapp.com",projectId:"whatsapp-8a1ce",storageBucket:"whatsapp-8a1ce.appspot.com",messagingSenderId:"502978213628",appId:"1:502978213628:web:7ff94d630272e5b3f04979"}).firestore()),x=O.a.auth(),f=new O.a.auth.GoogleAuthProvider,v=p,g=c(38),N=c(12),S=function(e){var t,c=e.id,s=e.name,n=e.addNewChat,i=Object(a.useState)(""),r=Object(o.a)(i,2),j=r[0],l=r[1],d=Object(a.useState)([]),u=Object(o.a)(d,2),h=u[0],b=u[1];Object(a.useEffect)((function(){c&&v.collection("Chatroom").doc(c).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return b(e.docs.map((function(e){return e.data()})))}))}),[c]),Object(a.useEffect)((function(){l(Math.floor(5e3*Math.floor()))}),[]);return n?Object(N.jsx)("div",{onClick:function(){var e=prompt("Name this chat");e&&v.collection("Chatroom").add({name:e})},className:"add_new",children:Object(N.jsx)("h2",{children:"Add new chat"})}):Object(N.jsx)(g.b,{to:"/Chatroom/".concat(c),children:Object(N.jsxs)("div",{className:"chat",children:[Object(N.jsx)("img",{src:"https://avatars.dicebear.com/api/male/".concat(j,".svg"),alt:"dp"}),Object(N.jsxs)("div",{className:"chat__Info",children:[Object(N.jsx)("h2",{children:s}),Object(N.jsx)("p",{children:null===(t=h[0])||void 0===t?void 0:t.message})]})]})})},C=Object(a.createContext)(),_=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(N.jsx)(C.Provider,{value:Object(a.useReducer)(t,c),children:s})},w=function(){return Object(a.useContext)(C)},y=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1],n=w(),i=Object(o.a)(n,1)[0].user;return Object(a.useEffect)((function(){v.collection("Chatroom").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(N.jsxs)("div",{className:"leftSide__Bar",children:[Object(N.jsxs)("div",{className:"leftSide_Header",children:[Object(N.jsx)("img",{alt:"dp",src:null===i||void 0===i?void 0:i.photoURL}),Object(N.jsxs)("div",{className:"leftSide_HeaderIcons",children:[Object(N.jsx)(d.a,{className:"i"}),Object(N.jsx)(j.a,{className:"i"}),Object(N.jsx)(h.a,{className:"i"})]})]}),Object(N.jsx)("div",{className:"leftSide_Search",children:Object(N.jsxs)("div",{className:"search_icon",children:[Object(N.jsx)(m.a,{className:"i"}),Object(N.jsx)("input",{type:"text",placeholder:"Search or start new chat"})]})}),Object(N.jsxs)("div",{className:"leftSide_Chats",children:[Object(N.jsx)(S,{addNewChat:!0}),c.map((function(e){return Object(N.jsx)(S,{id:e.id,name:e.data.name},e.id)}))]})]})},I=(c(85),c(58)),B=c.n(I),T=c(57),D=c.n(T),E=c(59),L=c.n(E),R=c(61),k=c.n(R),F=c(60),P=c.n(F),U=c(17),A=c(26),G=function(){var e,t,c=Object(a.useState)(""),s=Object(o.a)(c,2),n=s[0],i=s[1],r=Object(U.f)().roomId,j=Object(a.useState)(""),l=Object(o.a)(j,2),d=l[0],u=l[1],b=Object(a.useState)([]),O=Object(o.a)(b,2),p=O[0],x=O[1],f=w(),g=Object(o.a)(f,1)[0].user;Object(a.useEffect)((function(){r&&(v.collection("Chatroom").doc(r).onSnapshot((function(e){return u(e.data().name)})),v.collection("Chatroom").doc(r).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return x(e.docs.map((function(e){return e.data()})))})))}),[r]);return Object(N.jsxs)("div",{className:"RightSide__Bar",children:[Object(N.jsxs)("div",{className:"RightSide_Header",children:[Object(N.jsx)("img",{src:"https://avatars.dicebear.com/api/male/sdsnjdsd.svg",alt:"dp"}),Object(N.jsxs)("div",{className:"RightSide_Info",children:[Object(N.jsx)("h3",{children:d}),Object(N.jsxs)("p",{children:["Last Seen ","",new Date(null===(e=p[p.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(N.jsxs)("div",{className:"RightSide_Icons",children:[Object(N.jsx)(D.a,{className:"i"}),Object(N.jsx)(B.a,{className:"i"}),Object(N.jsx)(m.a,{className:"i"}),Object(N.jsx)(h.a,{className:"i"})]})]}),Object(N.jsx)("div",{className:"RightSide_ChatBody",children:p.map((function(e){var t;return Object(N.jsxs)("p",{className:"chat_message ".concat(e.name===g.displayName&&"chat_receiver"),children:[Object(N.jsx)("span",{className:"chat_Name",children:e.name}),e.message,Object(N.jsxs)("span",{className:"time",children:[new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()," "]})]})}))}),Object(N.jsxs)("div",{className:"footer",children:[Object(N.jsx)(L.a,{className:"i"}),Object(N.jsx)(P.a,{className:"im"}),Object(N.jsxs)("form",{action:"",children:[Object(N.jsx)("input",{value:n,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"  Type a messsage"}),Object(N.jsx)("button",{onClick:function(e){e.preventDefault(),console.log(n),v.collection("Chatroom").doc(r).collection("messages").add({message:n,name:g.displayName,timestamp:A.a.firestore.FieldValue.serverTimestamp()}),i("")},type:"submit",className:"send",children:"Send"})]}),Object(N.jsx)(k.a,{className:"i"})]})]})},M=(c(86),c(53)),H="SET_USER",J=function(e,t){switch(console.log(t),t.type){case H:return Object(M.a)(Object(M.a)({},e),{},{user:t.user});default:return e}},z=function(){var e=w(),t=Object(o.a)(e,2)[1],c=function(){x.signInWithPopup(f).then((function(e){return t({type:H,user:e.user})})).catch((function(e){return alert(e.messsage)}))};return console.log(c),Object(N.jsx)("div",{className:"Login",children:Object(N.jsxs)("div",{className:"Login__Container",children:[Object(N.jsx)("img",{src:"/clipart146275.png",alt:""}),Object(N.jsx)("div",{className:"Login__Text",children:Object(N.jsx)("h2",{children:"Sign Up Now"})}),Object(N.jsx)("button",{onClick:c,children:"Continue with Google"})]})})};var V=function(){var e=w(),t=Object(o.a)(e,1)[0].user;return Object(N.jsx)("div",{className:"app",children:t?Object(N.jsx)("div",{className:"app__Body",children:Object(N.jsx)(g.a,{children:Object(N.jsxs)(U.c,{children:[Object(N.jsxs)(U.a,{path:"/Chatroom/:roomId",children:[Object(N.jsx)(y,{}),Object(N.jsx)(G,{})]}),Object(N.jsxs)(U.a,{exact:!0,path:"/",children:[Object(N.jsx)(y,{}),Object(N.jsx)(G,{})]})]})})}):Object(N.jsx)(z,{})})},K=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,101)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),a(e),s(e),n(e),i(e)}))};i.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(_,{initialState:{user:null},reducer:J,children:Object(N.jsx)(V,{})})}),document.getElementById("root")),K()}},[[88,1,2]]]);
//# sourceMappingURL=main.31fe371f.chunk.js.map